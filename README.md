# HR Management System API

Система управления человеческими ресурсами с возможностью отслеживания KPI, компетенций, планов развития и проектов сотрудников.

## Описание проекта

HR Management System - это REST API для управления сотрудниками организации. Система позволяет:

- Управлять пользователями и их ролями
- Отслеживать KPI (ключевые показатели эффективности) сотрудников
- Управлять компетенциями с иерархической структурой
- Создавать и контролировать планы развития (Individual Development Plans)
- Управлять проектами сотрудников
- Просматривать структуру подчинения и средние показатели команды

## Технологический стек

- **Node.js** - серверная платформа
- **TypeScript** - язык программирования
- **Fastify** - веб-фреймворк
- **Sequelize** - ORM для работы с базой данных
- **PostgreSQL** - база данных

## Основные сущности

### User (Пользователь)
- Базовая информация (имя, email, пароль)
- Роль в системе
- Связь с менеджером (иерархия)
- Связи с KPI, компетенциями, планами развития и проектами

### Role (Роль)
- Название роли
- Ключевое слово для идентификации
- Связь с пользователями

### KPI (Ключевые показатели эффективности)
- Название показателя
- Плановый и фактический процент выполнения
- Связь с пользователем

### Competency (Компетенция)
- Название и описание компетенции
- Иерархическая структура (родительские и дочерние компетенции)
- Плановое и фактическое количество
- Статус выполнения
- Связь с пользователем

### DevelopmentPlan (План развития)
- Название плана
- Плановый и фактический процент выполнения
- Связь с пользователем

### Project (Проект)
- Название проекта
- Плановое и фактическое количество
- Связь с пользователем

## API Endpoints

### Пользователи
- `POST /api/user/v1` - Создание пользователя
- `GET /api/user/v1/:guid` - Получение пользователя (с ролью, подчиненными и средними KPI команды)
- `GET /api/user/v1/list` - Список пользователей (фильтры: roleId, managerGuid)

### Роли
- `POST /api/role/v1` - Создание роли
- `GET /api/role/v1/:id` - Получение роли
- `GET /api/role/v1/list` - Список ролей

### KPI
- `POST /api/kpi/v1` - Создание KPI
- `GET /api/kpi/v1/:guid` - Получение KPI
- `GET /api/kpi/v1/list` - Список KPI (фильтр: userGuid)
- `PUT /api/kpi/v1/:guid` - Обновление KPI
- `DELETE /api/kpi/v1/:guid` - Удаление KPI

### Компетенции
- `POST /api/competency/v1` - Создание компетенции
- `GET /api/competency/v1/:guid` - Получение компетенции (с пользователем, родительской и дочерними компетенциями)
- `GET /api/competency/v1` - Список компетенций (фильтр: userGuid, с иерархией)

### Планы развития
- `POST /api/development-plan/v1` - Создание плана развития
- `GET /api/development-plan/v1/list` - Список планов развития (фильтр: userGuid)
- `DELETE /api/development-plan/v1/:guid` - Удаление плана развития

### Проекты
- `POST /api/project/v1` - Создание проекта
- `GET /api/project/v1/:guid` - Получение проекта
- `GET /api/project/v1/list` - Список проектов (фильтр: userGuid)
- `PUT /api/project/v1/:guid` - Обновление проекта

## Особенности

### Иерархия сотрудников
Система поддерживает иерархическую структуру с отношениями менеджер-подчиненный. При получении информации о пользователе-менеджере автоматически рассчитываются:
- Средние KPI каждого подчиненного
- Средние KPI по всей команде

### Иерархия компетенций
Компетенции могут быть организованы в древовидную структуру с родительскими и дочерними элементами до нескольких уровней вложенности.

### Soft Delete
Все основные сущности поддерживают "мягкое" удаление - записи помечаются как удаленные, но физически остаются в базе данных.

### Валидация
Все входящие данные проходят валидацию на уровне схем Fastify с подробными сообщениями об ошибках.

## Установка и запуск

```bash
# Установка зависимостей
npm install

# Настройка переменных окружения
cp .env.example .env

# Запуск в режиме разработки
npm run dev


## Структура проекта

```
src/
├── app/
│   ├── user/           # Модуль пользователей
│   ├── role/           # Модуль ролей
│   ├── kpi/            # Модуль KPI
│   ├── competency/     # Модуль компетенций
│   ├── development-plan/  # Модуль планов развития
│   └── project/        # Модуль проектов
├── infrastructure/
│   ├── db/            # Конфигурация БД
│   └── fastify/       # Конфигурация Fastify
└── lib/               # Общие библиотеки и утилиты
```